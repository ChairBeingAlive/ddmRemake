# Grasshopper Basics

## Introduction

Welcome to Grasshopper. For designers who are exploring new shapes using
generative algorithms, Grasshopper® is a graphical algorithm editor that takes
advantage of Rhino‘s existing tools. Grasshopper offers new ways to expand and
control the 3D design and modeling processes, including automating repetitive
processes, generating geometry through mathematical functions, quickly making
changes to complex models, and creating complex forms through repetitions of
simple geometry. Grasshopper requires no prior programming or scripting
knowledge, and allows designers a high degree of flexibility in creating both
simple and complex forms.

The combination of Rhinoceros with the Grasshopper plugin makes parametrizing
structures via a clear, visual programming interface possible. Parametric
objects in Grasshopper are generated through graphic programming. These objects
can be modified and adapted within Grasshopper simultaneously affecting the
corresponding object in the Rhino modelling interface.

This tutorial should give you an overview about Grasshopper itself as well as
the navigation and basic components. Further it shows how the plugin connects
with Rhino and some important shortcuts for a smoother usage.

---

## Window

### Launch Grasshopper

Since Rhinoceros3D version 6, Grasshopper is directly included in Rhino as a
plugin. By typing `Grasshopper` into the Rhino command line, the plug-in will be
loaded automatically and the main Grasshopper [interface](#interface) will show up:

![Grasshopper_22_StartGrasshopper.png](/ddmImg/Grasshopper_22_StartGrasshopper.png)
> Launch command (Alternative: `left-click` the green grasshopper icon in the toolbar)

---

### Interface

![grasshopperInterface.png](/ddmImg/grasshopperInterface.png)

> 1. [**Main Menu Bar**](#main-menu-bar) - similar to typical Windows menus. 
>    Each menu shows more commands to edit the set tings or the canvas itself as well as the shortcuts to these commands.
> 2. **File Browser Control** - shows files you are working on and can be used for switching between files.
> 3. **Component Panels** - list all component categories.
> 
>    All components belong to a certain category (such as „Params“ for all primitive data types or „Curves“ for all curve related tools) 
>    and all categories are available as unique toolbar panels. 
>    The height and width of the toolbars can be adjusted, allowing for more or fewer on-screen buttons per category.
>
>    The toolbar panels themselves contain all the components that belong to that category. 
>    Since there are a potentially large number of these, it only shows the most recently used items. 
>    In order to see the entire collection, you have to click on the bar at the bottom of the Panel. (Image at the right-hand side)
> 4. **Canvas** - the main workplace where all the components will be arranged. 
> 5. [**Canvas Toolbar**](#canvas-toolbar) - quick access to a number of frequently used features, 
>    like open and save a file,  zoom in and out options, preview geometry options. 
> 6. [**Radial Menu**](#radial-menu) - group, cluster, enable, disable, display, hide and bake components. 

---

### Main Menu Bar

![grasshopperMainMenuBar.png](/ddmImg/grasshopperMainMenuBar.png)

> 1. **File** - allows users to open and save Grasshopper file, export images of the canvas, access to component folders.
> 2. **Edit** - lists common commands like `Undo`, `Redo`, `Cut`, `Copy`, `Paste`, and more. 
> 3. **View** - provides options related to Grasshopper interface. 
>    For instance, you can show or hide the canvas toobar and components here.
> 4. **Display** - manage how components and wires appear on the canvas, including color, icons, names and other graphical attributes.
>    Details of some display options are introduced in the [canvas toolbar](#canvas-toolbar) section.
> 5. **Solution** - contains the settings for the geometry generated by Grasshopper and made visible in Rhino. 
>    Details of functions like `Preview On` and `Preview Off` are introduced in the [radial menu](#radial-menu) section. 
> 6. **Help** - links to resources, documentation, and information about Grasshopper.

---

### Canvas Toolbar

![grasshopperCanvasToolbar.png](/ddmImg/grasshopperCanvasToolbar.png)

> 1. **Open** a Grasshopper file (.gh or .ghx)
> 2. **Save** the current file
> 3. **Zoom Factor**
> 4. **Zoom Extents** - offer several zoom options like zoom to selected components. 
> 5. **View Tool** - save current view as named view for future use. 
> 6. **Sketch tool** -  The sketch tool works like most pencil-type tools of Photoshop or Windows Paint. 
>    Default controls of the sketch tools allow changes of line weight, line type, and color. 
>    However, it can be quite difficult to draw straight lines or pre-defined shapes. 
>    In order to solve this problem, draw out any sketch line onto the canvas. 
>    Right click on the line, and select „Load from Rhino“, and select any pre-defined shape in your Rhino scene 
>    (This can be any 2d shape like a rectangle, circle, star...etc.). 
>    Once you have selected your referenced shape, hit Enter, and your previously drawn sketch line will be reconfigured to your Rhino reference shape.

> Grasshopper geometries are displayed dynamically within Rhino's viewports, offering a real-time glimpse of the modeling progression. 
> However, when numerous components are in play, there's a potential for geometries to overlap, leading to obscured or overlapping visualizations. 
> In this case, the following tools can be used to show only the parts you want to see:
> 
> 7. **No preview** - all geometry in grasshopper will **NOT** be shown in Rhino.
> 8. **Wireframe preview** - geometry in grasshopper will be shown in **wireframe** mode in Rhino.
> 9. **Shaded preview** - geometry in grasshopper will be shown in **shaded** mode in Rhino.
> 10. **Preview inside boundary** - with this tool you can draw a preview boundary on the canvas, and only geometry inside the boundary will be shown. 
>     Press ESCAPE to remove any existing boundary.
> 11. **Preview on selected geometry** - only draw preview geometry for selected objects.
> 12. **Preview settings** - allows for changing preview colors in Rhino.
> 13. **Preview mesh quality** - allows for changing preview quality of mesh.
>
> Note: alternatives to displaying and hidding some geometries are using the `Enable Preview` and `Disable Preview` tools in [radial menu](#radial-menu). 

---

### Radial Menu 


The radial menu, showing up by clicking on the `middle mouse wheel`, provides useful functions like preview, enable, group and cluster the components. 
Those function can alternatively be accessed by `right-click` in the canvas.

![grasshopperRadialMenu.png](/ddmImg/grasshopperRadialMenu.png)

> 1. **Preview On** - enables preview for the selected objects.
> 2. **Preview Off** - disables preview for the selected objects.
> 3. **Enable** - activetes the function of selected objects. 
> 4. **Disable** - halts the function of selected objects. This feature is useful for components that demand intensive computations, such as simulations. 
>    When a component is active, any alteration in its inputs triggers a re-computation, potentially hindering the modeling process's speed. 
>    To optimize workflow, you can initially disable such components and only activate them once other tasks are complete.
> 5. **Bake** - converts parametrically generated objects from Grasshopper into the ones in Rhino. More details will be introduced [later](#bake). 
> 6. **Group** - group selected objects, similar to group function in Rhino.
> 7. **Cluster** - combine selected objects into one component.
> 8. **Navigate** - navigates to desired section of the canvas.

---

## Objects

### Paramters and Components

**Objects** are the basic building blocks in the Grasshopper canvas. 
Each object performs a specific function, such as creating geometries, transforming shapes, performing mathematical operations, and so forth. 
Objects have inputs and outputs that you can connect using wires.

In Grasshopper, there are multiple types of objects, but we'll focus on two primary ones: **parameters** and **components**.
Parameters are essentially **data containers**. They **store** various kinds of information, such as when we use them to [reference geometries](#reference-from-rhino) from Rhino.
On the other hand, components are **actions containers**. They **perform** tasks, like analyzing and deforming geometries. 

![grasshopperParametersAndComponents](/ddmImg/grasshopperParametersAndComponents.png)

> Paramters (left) and Components (right)

---

### Add Objects

Every object can be added with draging (or clicking) and dropping to the canvas or by double
clicking onto the canvas and typing its name. Alternatively you can click
`space` and start typing the name of your desired component. A lof of components
are very similar to common commands and functions within Rhino. If you have a
certain action in mind and know its command for Rhino, try finding the
corresponding component in Grasshopper.

![Grasshopper_01_Component](/ddmImg/Grasshopper_01_Component.png)
> Command line in Grasshopper

---

### Objects Status

Objects on the canvas are usually color-coded to provide feedback about their status: 
**Grey** indicates neither warnings nor error.
**Orange** is indicative of a warning, meaning the component is functioning and there might be outputs, but there's something you should be aware of. 
**Red** means there's an error, meaning the component cannot complete its task due to some issue with the input data or other conditions.

![grasshopperObjectsStatus](/ddmImg/grasshopperObjectsStatus.png)

> 1. All objects **selected** within the Grasshopper canvas are drawn with a green
> overlay.
> 2. Parameter which encountered **neither warnings nor errors**.
> 3. Parameter which encountered **a warning** are displayed with an orange box. 
> Note: A lot of parameters and components are **orange** when you drop them onto the canvas
> since the lack of input data is considered to be an error.
> 4. Component which encountered **neither warnings nor errors**.
> 5. Component which has at least **a warning** associated with it. You can
> find warning and errors through the context menu of objects.
> 6. Component which encountered at least **an error**. The error can come either
> from the component itself or from one of its input/output parameters. We will
> learn more about component structures in the following chapters.

---

### Component Composition

As a actions container, a component requires inputs to execute tasks and produce the desired output. 
Typically, a component is structured into three parts: **input nodes** on the left, the **component's name or icon** in the center, and **output nodes** on the right. 
By linking the output of a parameter or another component to its input, you can supply the necessary data to the component.

![Grasshopper_02_ComponentBasic.png](/ddmImg/Grasshopper_02_ComponentBasic.png)

> 1. **Needed Inputs** - If you hover over the input node of a component for a few moments a window
> will pop up, giving you more information about the type of input this component expects. \
> Note: To directly set the data source for a paramter without connecting output from a parameter or component, you can `right click` on the input
> not and select `set one [data source]` or `set multiple inputs`, see details [below](#reference-from-rhino). 
> 2. **Output** - similarly, hovering over the output node, you could get more information about the output, like data type and structure. 

#### Zoom-In Interface

![Grasshopper_03_Zoominterface.png](/ddmImg/Grasshopper_03_Zoominterface.png)

> Some components offer additional input nodes if you zoom in. With the plus (+)
> and minus (-) you can add or remove input nodes from the component if needed.

--- 

## Geometry

### Appearance

Within Grasshopper, inputs and outputs can be seamlessly integrated with the Rhino workspace. 
Geometries in Grasshopper can either be [**referenced**](#reference) from objects within Rhino or directly constructed using Grasshopper components. 
Similarly, you can translate Grasshopper geometries into editable forms in Rhino using the [**bake**](#bake) command.

![Grasshopper_23_ConnectionRhinoGH.png](/ddmImg/Grasshopper_23_ConnectionRhinoGH.png)

> Here you see the Rhino viewport and Grasshopper canvas side by side. The three
> spheres in the rhino workspace illustrate their origin through a distinct
> color coding:
>
> 1. The grey one on the left is generated in Rhino with the command `sphere`.
>    It is also editable and can interact with other Rhino objects.
> 2. The red one in the middle is generated with the sphere component from
>    Grasshopper. The red wireframe indicates an origin from Grasshopper. Red
>    also means, that the component containing this geometry an Grasshopper is
>    currently not selected.
> 3. If you activate the component in Grasshopper it not just turns green in
>    Grasshopper. The red wireframe in the Rhino viewort turns green as well.

---

### Reference from Rhino

In Grasshopper, **parameters** `Point`, `Curve`, `Surface` and `Brep`are normally used to 
reference **points**, **curves**, **surfaces** and **polysurfaces** in Rhino, respectively. 
It is worth noting that although there is parameter like `Circle` in grasshopper, 
you still need to use `curve` instead of `circle` to reference a circle in Rhino.
One reason is that you can gain more flexibility using `Curve`. 
You can still derive circle-specific properties from it, like its center point or radius, but you also have the broader range of functionalities available for curves.

**Note on `Brep`**: If you check `Params` tag in Grasshopper, you will notice there is not parameter called `Polysurface`. 
To represent a polysurface in Rhino, we use `Brep` in Grasshopper. `Brep` stands for boundary representation that describes 3D shapes by delineating their boundaries.
BREPs provide a very comprehensive representation including the vertices, edges, surfaces of the polysurface. 
A Brep can be a single surface or a polysurface, meaning you can also use `Brep` to represent surfaces in Rhino.

![grasshopperReference.png](/ddmImg/grasshopperReference.png)

> To reference a geometry (for instance, the sphere depicted in the image) from Rhino, select the sphere in Rhino, 
> `right-click` on the parameter and choose `Set one Brep`. 
> If you aim to reference several geometries, opt for `Set Multiple Breps`. 
> This logic can similarly be applied to the other parameters.
> 
> Note: Again, if you want to reference a polysurface, please use `Brep`. 
> You cannot use `Surface` and `Set Multiple Surfaces` to achieve this. 
> In other words, a polysurface is not equal to multiple surfaces.

---

### Bake to Rhino

Red and green Grasshopper wireframe "holograms" in the Rhino viewport are not
editable with Rhino and cannot interact with Rhino objects (no snapping etc.).
To enable editing you can **bake** geometry.

![grasshopperBake.png](/ddmImg/grasshopperBake.png)

> 1. `Right-click` on the output node and select `Bake`.
> 2. A window will show up. Here you can define on which layer you would like to
>    place the geometry on after baking. Click `OK` to bake it.

![Grasshopper_26_Bake.png](/ddmImg/Grasshopper_26_Bake.png)

> Now we have baked the right sphere. Visually and in regard to its behaviour it
> is now the same as the one we created within Rhino with the `sphere` command
> (the one on the left).
>
> Note: After baking the object, it is no longer connected to Grasshopper
> and therefore is not affected by any changes made in Grasshopper.

## Data in Grasshopper

### Distributing data

![Grasshopper_04_DatainGrasshopper.png](/ddmImg/Grasshopper_04_DatainGrasshopper.png)

> Data can be distributed to components in three different ways: internally,
> referenced (right click on the component), or externally as an output of
> another component.

### Data Management

![Grasshopper_05_DatainGrasshopper.png](/ddmImg/Grasshopper_05_DatainGrasshopper.png)

> Data in Grasshopper is managed in three different ways:
>
> 1. As a single data item
> 2. As a list of items
> 3. As a "data tree" (a list containing lists)

### List

![Grasshopper_06_List.png](/ddmImg/Grasshopper_06_List.png)

> Lists store your data and organize several data items. Each data item has a
> specific position inside of the list called the "index number" (the first
> object has the index number "0"). An item can consist of any data known to
> Grasshopper (a file, a line, a point, color information etc.). Data items can
> also be empty (Null object). With the following components you can manipulate
> and change your lists. For example: split list, shift list, list leght, list
> item...

Under the following link you can find an overview of list operations in
Grasshopper: http://wiki.bk.tudelft.nl/toi-pedia/Grasshopper_Basic_List_Actions

### Data-Tree

![Grasshopper_07_DataTree.png](/ddmImg/Grasshopper_07_DataTree.png)

> Some components create an output of multiple lists. They are stored in so
> called data trees. They basicly work like a folder structure on your computer.
> They are lists of lists and can vary greatly an complexity.

![Grasshopper_08_DataTree.png](/ddmImg/Grasshopper_08_DataTree.png)

> You can view the data tree with the "param viewer" component. The image above
> shows a single branch (0:0). This main branch has nine sub-branches which
> start with the number of the parent branch. So the first one is (0:0:0) second
> one (0:0:1) and so on. It allows you to understand the data's location within
> the tree.

### Component Data IO

By right-clicking on the in- or output of a component you can choose different
options to manipulate the data stream. The options are Reverse, Flatten, Graft,
Simplify and Expression.

#### Reverse

![Grasshopper_09_Reverse.png](/ddmImg/Grasshopper_09_Reverse.png)

> Reverse By activating the Reverse function either on the input or the output
> it will reverse the order of the items. (for example the item from index 0 is
> now on index 10 and the one from 10)

![Grasshopper_10_Reverse.png](/ddmImg/Grasshopper_10_Reverse.png)

#### Graft / Flatten

To understand this function we have to understand how grasshopper manages and
organises data. Multiple lists are stored in trees and each tree has a branches.
Graft and Flatten manipulate the branches. Graft will create a new level of
possible branches, while Flatten does the opposite and collapses one level of
complexity of a data tree.\
In this example we create a series of points (ten points with a distance of 10
from each other along the z axes). We will now have a look at this command on an
example:

![Grasshopper_11_GraftandFlatten.png](/ddmImg/Grasshopper_11_GraftandFlatten.png)

> we create a series which counts 10 steps and each step shifts by 10 along the
> z axis.

![Grasshopper_12_GraftandFlatten.png](/ddmImg/Grasshopper_12_GraftandFlatten.png)

> This component generates one branch (or sub-list). The name of the output list
> and its "complexity" (amount of branches or sub-lists) is listed on the top
> (0,0). Further down we see that we have 10 points with an index from 0 to 9.
> As well as the coordinate of each point.

![Grasshopper_13GrafandFlatten.png](/ddmImg/Grasshopper_13GrafandFlatten.png)

> Now we can right-click on the output node of the „construct point“ component
> and click on graft.

![Grasshopper_14_GraftandFlatten.png](/ddmImg/Grasshopper_14_GraftandFlatten.png)

> Graft now puts every point into a seperate branch (or sub-list). The first
> branch with the index 0 (0;0;0), the next one is (0;0;1) and so on. This
> effects the datastructure for further manipulation. If we now try to move the
> points along the x-axis they will react differently.

![Grasshopper_15_GraftandFlatten.png](/ddmImg/Grasshopper_15_GraftandFlatten.png)

> With this definition we move 5 points along the x-axis by a distance of 10
> units.

![Grasshopper_16_GraftandFlatten.png](/ddmImg/Grasshopper_16_GraftandFlatten.png)

> If all points are in the same branch, Grasshopper moves the first five points
> of the branch by 10 units, while the rest of the items remain at the position
> of the 5th item.

![Grasshopper_17_GraftandFlatten.png](/ddmImg/Grasshopper_17_GraftandFlatten.png)

> If we flatten the data before applying the transformation, the additional
> sublists are being collapsed and the data items are stored in one list again.

![Grasshopper_18_GraftandFlatten.png](/ddmImg/Grasshopper_18_GraftandFlatten.png)

> an overview with all steps from graft to flatten a list.

#### Simplify

![Grasshopper_19_Simplify.png](/ddmImg/Grasshopper_19_Simplify.png)

> Simplify allows you to collapse all empty branches leaving the data tree with
> the minimum of necessary complexity. While graft created groups with a data
> path (0,0,1), simplify reduces all empty branches. The new groups are now just
> (0), (1) etc. Also visible in the Parametric Viewer. Instead of creating
> branches, the component "Simplify-Tree" creates trunks of data trees.\
> (see picture bellow)

![Grasshopper_20_Simplify.png](/ddmImg/Grasshopper_20_Simplify.png)

#### Expression

![Grasshopper_21_Expression.png](/ddmImg/Grasshopper_21_Expression.png)

> The expression option allows you to manipulate the data with a mathimatical
> expression (in this example x\*2, so the data will be scaled by a factor of
> two). You can also use the „expression“ component for the same result. It is a
> little bit more user-friendly.

---

## Plugin Installation

A plugin is a software component that adds specific features to an existing
computer program. Grasshopper as well as Rhino allows the installation of
plugins. These additional components allow functional extensions or the
simplification of certain operations.

Installing a plugin for Grasshopper only needs a few steps. Shown here is an
example with the "/ddmImgofossor" plugin. It is a terrain modeling plugin for
Rhino and Grasshopper. It enables easy editing of cut and fill operations for
landscape architecture.


![Grasshopper_m5.png](/ddmImg/Grasshopper_m5.png)

> 1. Download the plug-in from [Food4Rhino](https://www.food4rhino.com/) - you
>    will need to create an account - and unzip the downloaded folder.

![Grasshopper_m7.png](/ddmImg/Grasshopper_m7.png)

> 2. Launch Rhino and run the **Grasshopper** command.

![Grasshopper_m8.png](/ddmImg/Grasshopper_m8.png)

> 3. Open _File_ > _Special Folders_ > _Components Folder_

![Grasshopper_m9.png](/ddmImg/Grasshopper_m9.png)

> 4. Copy the the .ghpy file from the unziped folder in the window that opened.
>    Close the window when done .

![Grasshopper_m10.png](/ddmImg/Grasshopper_m10.png)

> 5. The /ddmImgofossor panel will appear as a component panel together with the
>    all its additional components. If not, restart Grasshopper and/or Rhino.

---

## Shortcuts

| Shortcut                                        | Description                                                                |
| ----------------------------------------------- | -------------------------------------------------------------------------- |
| Hold left and select                            | Select things in the canvas                                                |
| Hold right and move                             | Move the canvas                                                            |
| Ctrl + Z                                        | Undo                                                                       |
| Ctrl + Z                                        | Redo                                                                       |
| Ctrl + X                                        | Cut out                                                                    |
| Ctrl + C                                        | Copy the component                                                         |
| Ctrl + V                                        | Paste next to the copied component                                         |
| Ctrl + Shift + V                                | Paste in the middle of the window                                          |
| Space or double left-click                      | Opens command prompt to type in the name of the component                  |
| Shift + dragging from one to another component  | Connects to the component even if there is already one existing connection |
| Ctrl + dragging from one to another component   | Disconnects the only one connection                                        |
| Alt + hold left                                 | Extends your canvas horizontally (keeps existing components as they were)  |
| Alt + hold left + Alt                           | Extends your canvas vertically (keeps existing components as they were)    |
| Hold left on component + Alt and drag           | Copy the component and move it to wherever you want                        |
| Ctrl + Alt + Hold left on component             | Shows the location of the component in the toolbar                         |
| Mark component + hold Ctrl + left arrow         | Jump automatically to the beginning of the wire and the previous component |
| Mark component + hold Ctrl + right arrow        | Jumps automatically to the end of the wire                                 |
| Mark component + hold Ctrl + Shift + left arrow | Selects all components connected to the marked one                         |
| Ctrl + Shift + Q                                | Generates a screenshot which can be edited                                 |
| Ctrl + Q                                        | Hides all selected components from the Rhino view                          |
| Ctrl + Shift + I                                | Selects all components except the selected ones                            |
| Ctrl + Shift + drag by holding left             | Drag all connected wires to another component                              |
